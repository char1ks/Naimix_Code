<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Å–º–æ–≥—Ä–∞–º–º—ã</title>
    <style>
        @import url('https://fonts.googleapis.com/css?family=Roboto:100,300,400,700');
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #FF6F20; /* –û—Ä–∞–Ω–∂–µ–≤—ã–π */
            color: #FFFFFF; /* –ë–µ–ª—ã–π */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }
        h1 {
            font-size: 48px;
            text-transform: uppercase;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        label {
            font-size: 24px;
            margin-bottom: 10px;
        }
        input[type="number"], input[type="text"], select {
            font-size: 18px;
            padding: 10px;
            margin-bottom: 20px;
            border: 2px solid #FFFFFF; /* –ë–µ–ª—ã–π */
            border-radius: 5px;
            background-color: #FF6F20; /* –û—Ä–∞–Ω–∂–µ–≤—ã–π */
            color: #FFFFFF; /* –ë–µ–ª—ã–π */
        }
        button {
            font-size: 24px;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            background-color: #FFFFFF; /* –ë–µ–ª—ã–π */
            color: #FF6F20; /* –û—Ä–∞–Ω–∂–µ–≤—ã–π */
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
        }
        button:hover {
            background-color: #E65C17; /* –¢–µ–º–Ω–µ–µ –æ—Ä–∞–Ω–∂–µ–≤—ã–π */
            color: #FFFFFF; /* –ë–µ–ª—ã–π */
        }
        .background-text {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: -1;
            opacity: 0.1; /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ç–µ–∫—Å—Ç */
            font-size: 5rem; /* –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
            font-weight: bold;
            text-align: center;
            pointer-events: none; /* –û—Ç–∫–ª—é—á–∞–µ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —Ç–µ–∫—Å—Ç–æ–º */
        }
        .background-text div {
            position: absolute;
            transform-origin: center;
        }
        .background-text div:nth-child(1) {
            color: #FFFFFF; /* –ë–µ–ª—ã–π */
            transform: rotate(-20deg);
            left: 10%;
            top: 20%;
        }
        .background-text div:nth-child(2) {
            color: #FF6F20; /* –û—Ä–∞–Ω–∂–µ–≤—ã–π */
            transform: rotate(15deg);
            left: 20%;
            top: 40%;
        }
        .background-text div:nth-child(3) {
            color: #FFFFFF; /* –ë–µ–ª—ã–π */
            transform: rotate(-10deg);
            left: 30%;
            top: 60%;
        }
        .background-text div:nth-child(4) {
            color: #FF6F20; /* –û—Ä–∞–Ω–∂–µ–≤—ã–π */
            transform: rotate(5deg);
            left: 40%;
            top: 20%;
        }
        .background-text div:nth-child(5) {
            color: #FFFFFF; /* –ë–µ–ª—ã–π */
            transform: rotate(25deg);
            left: 50%;
            top: 40%;
        }
        .background-text div:nth-child(6) {
            color: #FF6F20; /* –û—Ä–∞–Ω–∂–µ–≤—ã–π */
            transform: rotate(-15deg);
            left: 60%;
            top: 60%;
        }
        .background-text div:nth-child(7) {
            color: #FFFFFF; /* –ë–µ–ª—ã–π */
            transform: rotate(10deg);
            left: 70%;
            top: 20%;
        }
        .background-text div:nth-child(8) {
            color: #FF6F20; /* –û—Ä–∞–Ω–∂–µ–≤—ã–π */
            transform: rotate(-5deg);
            left: 80%;
            top: 40%;
        }
        .background-text div:nth-child(9) {
            color: #FFFFFF; /* –ë–µ–ª—ã–π */
            transform: rotate(30deg);
            left: 90%;
            top: 60%;
        }
        .background-text div:nth-child(10) {
            color: #FF6F20; /* –û—Ä–∞–Ω–∂–µ–≤—ã–π */
            transform: rotate(-25deg);
            left: 10%;
            top: 20%;
        }
    </style>
    <script>
        async function createCosmogram() {
            // –ò–∑–≤–ª–µ–∫–∞–µ–º employeeId –∏–∑ URL
            const urlParts = window.location.pathname.split('/');
            const employeeId = urlParts[urlParts.length - 1]; // –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ ID –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ URL
            const hour = document.getElementById("hour").value || 0; // –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, —Å—Ç–∞–≤–∏–º 0
            const minute = document.getElementById("minute").value || 0; // –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, —Å—Ç–∞–≤–∏–º 0
            const longitude = document.getElementById("longitude").value;
            const latitude = document.getElementById("latitude").value;
            const nation = document.getElementById("nation").value;
            const timezone = document.getElementById("timezone").value; // –ü–æ–ª—É—á–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å

            // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
            const cosmogramData = {
                hour: hour,
                minute: minute,
                longitude: parseFloat(longitude),
                latitude: parseFloat(latitude),
                nation: nation,
                timezone: timezone
            };

            try {
                const response = await fetch(`/cosmograms/api/transDTO/${employeeId}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(cosmogramData)
                });

                if (response.ok) {
                    const result = await response.json(); // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
                    console.log(result); // –í—ã–≤–æ–¥–∏–º –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Å–æ–ª—å
                    alert(JSON.stringify(result, null, 2)); // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ–±—ä–µ–∫—Ç –≤ —Å—Ç—Ä–æ–∫—É JSON –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
                    // –¢–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ –≤—Ç–æ—Ä–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç
                    await sendToGetCosmogram(result);
                } else {
                    throw new Error('Network response was not ok');
                }
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞:", error);
                alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ—Å–º–æ–≥—Ä–∞–º–º—ã.");
            }
        }

        async function sendToGetCosmogram(data) {
            try {
                const response = await fetch('/cosmograms/api/getCosmogramm', {
                    method: 'POST', // –ò—Å–ø–æ–ª—å–∑—É–µ–º GET –º–µ—Ç–æ–¥
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data) // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
                });

                if (response.ok) {
                    const result = await response.json(); // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON

                    const svgContainer = document.createElement('div');
                      svgContainer.style.position = 'fixed'; // –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
            svgContainer.style.top = '0'; // –°–≤–µ—Ä—Ö—É
            svgContainer.style.left = '0'; // –°–ª–µ–≤–∞
            svgContainer.style.width = '100%'; // –®–∏—Ä–∏–Ω–∞ 100%
            svgContainer.style.height = '100%'; // –í—ã—Å–æ—Ç–∞ 100%
            svgContainer.style.overflow = 'auto'; // –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ

            svgContainer.innerHTML = result; // –í—Å—Ç–∞–≤–ª—è–µ–º SVG

                    svgContainer.innerHTML = JSON.stringify(result, null, 2); // –í—Å—Ç–∞–≤–ª—è–µ–º SVG
                    document.body.innerHTML = ''; // –û—á–∏—â–∞–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ body
                    document.body.appendChild(svgContainer); // –î–æ–±–∞–≤–ª—è–µ–º SVG –≤ body


                } else {
                    throw new Error('Network response was not ok');
                }
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞:", error);
                alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ—Å–º–æ–≥—Ä–∞–º–º—ã.");
            }
        }
    </script>
</head>
<body>
<div class="background-text">
    <div>ü™Ñ –ú–∞–≥–∏—è</div>
    <div>üîÆ –ì–∞–¥–∞–Ω–∏–µ</div>
    <div>üßô‚Äç‚ôÄÔ∏è –ë–∞–±–∞ –Ø–≥–∞</div>
    <div>üåå –ó–≤–µ–∑–¥—ã</div>
    <div>üî≠ –ê—Å—Ç—Ä–æ–ª–æ–≥–∏—è</div>
    <div>üå† –ì–∞–¥–∞–Ω–∏—è</div>
    <div>üìä –û—Ç—á–µ—Ç—ã</div>
    <div>üìà –î–∏–∞–≥—Ä–∞–º–º—ã</div>
    <div>üìâ –ê–Ω–∞–ª–∏–∑</div>
    <div>ü§ñ –ü–æ–º–æ—â—å</div>
</div>
<h1>–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–æ—Å–º–æ–≥—Ä–∞–º–º—ã</h1>
<label for="hour">–ß–∞—Å —Ä–æ–∂–¥–µ–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å):</label>
<input type="number" id="hour" name="hour"><br><br>
<label for="minute">–ú–∏–Ω—É—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å):</label>
<input type="number" id="minute" name="minute"><br><br>
<label for="longitude">–î–æ–ª–≥–æ—Ç–∞:</label>
<input type="number" id="longitude" name="longitude" step="0.0000001" required><br><br>
<label for="latitude">–®–∏—Ä–æ—Ç–∞:</label>
<input type="number" id="latitude" name="latitude" step="0.0000001" required><br><br>
<label for="nation">–°—Ç—Ä–∞–Ω–∞:</label>
<input type="text" id="nation" name="nation" required><br><br>
<label for="timezone">–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å:</label>
<select id="timezone" name="timezone" required>
    <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å</option>
    <option value="Africa/Abidjan">Africa/Abidjan</option>
    <option value="Africa/Algiers">Africa/Algiers</option>
    <option value="Africa/Cairo">Africa/Cairo</option>
    <option value="America/New_York">America/New_York</option>
    <option value="America/Los_Angeles">America/Los_Angeles</option>
    <option value="Asia/Tokyo">Asia/Tokyo</option>
    <option value="Asia/Shanghai">Asia/Shanghai</option>
    <option value="Australia/Sydney">Australia/Sydney</option>
    <option value="Europe/Berlin">Europe/Berlin</option>
    <option value="Europe/London">Europe/London</option>
    <option value="Europe/Paris">Europe/Paris</option>
    <option value="Europe/Rome">Europe/Rome</option>
    <option value="Europe/Moscow">Europe/Moscow</option>
    <option value="Pacific/Auckland">Pacific/Auckland</option>
    <option value="America/Toronto">America/Toronto</option>
    <option value="America/Chicago">America/Chicago</option>
    <option value="America/Sao_Paulo">America/Sao_Paulo</option>
    <option value="Asia/Dubai">Asia/Dubai</option>
    <option value="Asia/Kolkata">Asia/Kolkata</option>
    <option value="Asia/Seoul">Asia/Seoul</option>
    <option value="Pacific/Honolulu">Pacific/Honolulu</option>
</select><br><br>
<button type="button" onclick="createCosmogram()">–°–æ–∑–¥–∞—Ç—å –∫–æ—Å–º–æ–≥—Ä–∞–º–º—É</button>
</body>
</html>
